{% extends 'base.html' %}
{% block title %} Detalhes do Projeto {% endblock %}

{% block conteudo %}
    <div class="display-container">
        <h2>Projetos Cadastrados (Somente Professor)</h2>
        <div id="listaProjetosProfessor"></div>

        <button onclick="voltar()" style="margin-top: 20px;">
            ← Voltar para a tela inicial
        </button>
    </div>

    <script>
        function carregarProjetosProfessor() {
            const container = document.getElementById("listaProjetosProfessor");
            container.innerHTML = "";

            // Todos os projetos, independente do usuário
            const projetos = JSON.parse(localStorage.getItem("projetos")) || [];

            projetos.forEach(projeto => {
                const div = document.createElement("div");
                div.className = "projeto-item";

                div.innerHTML = `
                    <h3>${projeto.nome}</h3>
                    <p>${projeto.alunos.length} aluno(s)</p>
                    <button class="btnDetalhes">Ver Detalhes</button>
                `;

                div.querySelector(".btnDetalhes").addEventListener("click", () => {
                    localStorage.setItem("projetoSelecionadoID", projeto.id);
                    window.location.href = "{{ url_for('usuario.detalhes_professor') }}'";
                });

                container.appendChild(div);
            });
        }

        function voltar(){
            window.location.href="{{ url_for('auth.home') }}"
        }

        document.addEventListener("DOMContentLoaded", carregarProjetosProfessor);
    </script>
{% endblock %}